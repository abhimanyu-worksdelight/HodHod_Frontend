"use strict";(self.webpackChunkng2angle=self.webpackChunkng2angle||[]).push([[199],{6199:(ce,y,d)=>{d.r(y),d.d(y,{UsersModule:()=>me});var h=d(6895),p=d(6691),x=d(5229),A=d(537),l=d(4719),u=d(5867),e=(d(2504),d(4650)),v=d(4606),w=d(8064),I=d(5328),C=d(362),q=d(398),U=d(2734),T=d(551);function M(n,i){1&n&&(e.TgZ(0,"div",34),e._uU(1,"This field is required"),e.qZA())}function N(n,i){1&n&&(e.TgZ(0,"div",34),e._uU(1,"This field is required"),e.qZA())}function J(n,i){1&n&&(e.TgZ(0,"div",34),e._uU(1,"This field is required"),e.qZA())}function E(n,i){1&n&&(e.TgZ(0,"div",34),e._uU(1,"Please enter a valid email"),e.qZA())}function D(n,i){1&n&&(e.TgZ(0,"div",34),e._uU(1,"This field is required"),e.qZA())}function S(n,i){1&n&&(e.TgZ(0,"div",34),e._uU(1,"store is required"),e.qZA())}function Q(n,i){if(1&n&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.selectedFile?null:t.selectedFile.name," ")}}function L(n,i){if(1&n&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.fileName," ")}}function Y(n,i){1&n&&(e.TgZ(0,"div",34),e._uU(1,"This field is required"),e.qZA())}function k(n,i){1&n&&e._UZ(0,"span",36)}function H(n,i){1&n&&(e.TgZ(0,"div",34),e._uU(1,"This field is required"),e.qZA())}let G=(()=>{class n{constructor(t,o,r,s,a,m,c){this.userService=o,this.afs=r,this.authService=s,this.router=a,this.validationService=m,this.fireStorage=c,this.onToggleCheckValue=!1,this.loading=!1,this.saveLoading=!1,this.positionItems=["Business Manager","Sales"],this.disabled=!1,this.value={},this.emailPattern=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.valForm=t.group({name:[null,l.kI.required],email:[null,l.kI.required],password:[null,l.kI.required],phone:[null,l.kI.required],isAdmin:[!1,l.kI.required],file:"",deviceType:[null,l.kI.required],roleType:[null,l.kI.required]})}ngOnInit(){this.uid=sessionStorage.getItem("uid"),this.userType=sessionStorage.getItem("customer")}onFileChanged(t){if(t){if(this.selectedFile=t.target.files[0],this.fileUrl=this.selectedFile.src,0===this.selectedFile.length)return;const o=new FileReader;o.readAsDataURL(this.selectedFile),o.onload=r=>{this.fileUrl=o.result}}}addUserData(t,o){t.preventDefault();for(let r in this.valForm.controls)this.valForm.controls[r].markAsTouched();if(this.valForm.valid&&this.selectedFile){const r=this.selectedFile,s=Date.now(),a="/users",c=this.fireStorage.ref(`${a}/${s}-${r.name}`);this.fireStorage.upload(`${a}/${s}-${r.name}`,r).snapshotChanges().pipe((0,A.x)(()=>{c.getDownloadURL().subscribe(g=>{g&&(this.fileUrl=g,this.saveUserToDB(o,g))})})).subscribe(_=>{})}else this.valForm.valid?this.saveUserToDB(o,""):console.log("this.valForm",this.valForm)}registerUser(t){console.log("data",t);const{email:o,password:r}=t;return new Promise((s,a)=>{u.Z.auth().createUserWithEmailAndPassword(o,r).then(m=>(this.user_id=m.user.uid,s(m))).catch(m=>a(m))})}saveUserToDB(t,o){this.saveLoading=!0,this.registerUser(t).then(()=>{let r={image:o,name:t.name,email:t.email,device_type:t.deviceType,phone_number:t.phone,is_admin:t.isAdmin,created_at:u.Z.firestore.FieldValue.serverTimestamp(),updated_at:u.Z.firestore.FieldValue.serverTimestamp(),uid:this.uid,type:this.userType,role_type:t.roleType,deleted_at:null,deleted_by:null,disabled:!1,deleted_by_user_type:null};console.log("data",r),this.userService.addUser(r).then(()=>{this.validationService.sweetalertSuccess(),this.router.navigate(["users/user-listing"])}).catch(s=>{console.log(s)})})}selected(t){console.log(this.selectedLevel)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.QS),e.Y36(v.K),e.Y36(w.ST),e.Y36(I.e),e.Y36(p.F0),e.Y36(C.R),e.Y36(q.Q1))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-users"]],decls:74,vars:17,consts:[[1,"content-heading"],[1,"d-flex","justify-content-between","w-100","align-items-center"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"routerLink"],["_ngcontent-lgi-c20","",1,"icon-arrow-left","mr-1"],[1,"row"],[1,"col-md-12"],[1,"card","card-default"],[1,"card-body"],["role","form",1,"form-validate",3,"formGroup","ngSubmit","keydown.enter","keydown.shift.enter"],["dataPost","ngForm"],[1,"form-row"],[1,"col-lg-6","mb-3"],["ngModel","","required","","formControlName","name","name","name","type","text","placeholder","Enter user name",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"col-lg-6"],["ngModel","","required","","formControlName","phone","name","phone","type","text","placeholder","Enter phone",1,"form-control"],["ngModel","","required","","formControlName","email","name","email","type","email","placeholder","Enter email",1,"form-control",3,"pattern"],[1,"col-lg-9"],["ngModel","","required","","formControlName","password","name","password","type","password","placeholder","Enter password",1,"form-control"],[1,"col-lg-3"],["ngModel","","formControlName","isAdmin"],[1,"form-group"],["required","","formControlName","roleType","name","roleType","optionValueField","id","optionTextField","text","placeholder","Select position",1,"custom-single-select",3,"multiple","items"],["for","image-input",1,"file-upload"],[1,"btn","btn-secondary"],[1,"far","fa-folder-open","mr"],["ngModel","","formControlName","file","type","file","name","file","accept",".jpeg,.jpg,.png,.svg",1,"form-control",3,"input"],["class","form-control",4,"ngIf"],[1,"image-preview-box"],["onerror","this.onerror=null;this.src='assets/img/preview-img.png';",1,"previewImage",3,"src"],["class","spinner-border spinner-border-sm custom-spinner",4,"ngIf"],["ngModel","","required","","formControlName","deviceType","name","deviceType","type","text","placeholder","Enter device type",1,"form-control"],["type","button",1,"btn","btn-sm","btn-secondary","mr-2",3,"click"],["type","submit",1,"btn","btn-sm","btn-info"],[1,"text-danger"],[1,"form-control"],[1,"spinner-border","spinner-border-sm","custom-spinner"]],template:function(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"span"),e._uU(3,"Add user"),e.qZA(),e.TgZ(4,"button",2),e._UZ(5,"em",3),e._uU(6," Back "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"form",8,9),e.NdJ("ngSubmit",function(a){e.CHM(r);const m=e.MAs(12);return e.KtG(o.addUserData(a,m.value))})("keydown.enter",function(a){return a.preventDefault()})("keydown.shift.enter",function(a){return a.preventDefault()}),e.TgZ(13,"div",10)(14,"div",11)(15,"label"),e._uU(16,"User name"),e.qZA(),e._UZ(17,"input",12),e.YNc(18,M,2,0,"div",13),e.qZA(),e.TgZ(19,"div",14)(20,"label"),e._uU(21,"Phone"),e.qZA(),e._UZ(22,"input",15),e.YNc(23,N,2,0,"div",13),e.qZA()(),e.TgZ(24,"div",10)(25,"div",11)(26,"label"),e._uU(27,"Email"),e.qZA(),e._UZ(28,"input",16),e.YNc(29,J,2,0,"div",13),e.YNc(30,E,2,0,"div",13),e.qZA(),e.TgZ(31,"div",11)(32,"div",4)(33,"div",17)(34,"label"),e._uU(35,"Password"),e.qZA(),e._UZ(36,"input",18),e.YNc(37,D,2,0,"div",13),e.qZA(),e.TgZ(38,"div",19)(39,"label"),e._uU(40,"Is Admin?"),e.qZA(),e._UZ(41,"ui-switch",20),e.qZA()()()(),e.TgZ(42,"div",10)(43,"div",14)(44,"div",21)(45,"label"),e._uU(46,"Role Type"),e.qZA(),e._UZ(47,"ngx-select",22),e.YNc(48,S,2,0,"div",13),e.qZA()()(),e.TgZ(49,"div",10)(50,"div",11)(51,"div",21)(52,"label"),e._uU(53,"Image"),e.qZA(),e.TgZ(54,"label",23)(55,"button",24),e._uU(56," Select file "),e._UZ(57,"em",25),e.qZA(),e.TgZ(58,"input",26),e.NdJ("input",function(a){return o.onFileChanged(a)}),e.qZA(),e.YNc(59,Q,2,1,"span",27),e.YNc(60,L,2,1,"span",27),e.qZA(),e.YNc(61,Y,2,0,"div",13),e.qZA(),e.TgZ(62,"div",28),e._UZ(63,"img",29),e.YNc(64,k,1,0,"span",30),e.qZA()(),e.TgZ(65,"div",11)(66,"label"),e._uU(67,"Device type"),e.qZA(),e._UZ(68,"input",31),e.YNc(69,H,2,0,"div",13),e.qZA()(),e.TgZ(70,"button",32),e.NdJ("click",function(){e.CHM(r);const a=e.MAs(12);return e.KtG(a.resetForm({}))}),e._uU(71,"Clear"),e.qZA(),e.TgZ(72,"button",33),e._uU(73,"Save"),e.qZA()()()()()()}2&t&&(e.xp6(4),e.Q6J("routerLink","/users/user-listing"),e.xp6(7),e.Q6J("formGroup",o.valForm),e.xp6(7),e.Q6J("ngIf",o.valForm.controls.name.hasError("required")&&(o.valForm.controls.name.dirty||o.valForm.controls.name.touched)),e.xp6(5),e.Q6J("ngIf",o.valForm.controls.phone.hasError("required")&&(o.valForm.controls.phone.dirty||o.valForm.controls.phone.touched)),e.xp6(5),e.Q6J("pattern",o.emailPattern),e.xp6(1),e.Q6J("ngIf",o.valForm.controls.email.hasError("required")&&(o.valForm.controls.email.dirty||o.valForm.controls.email.touched)),e.xp6(1),e.Q6J("ngIf",o.valForm.controls.email.hasError("pattern")&&(o.valForm.controls.email.dirty||o.valForm.controls.email.touched)),e.xp6(7),e.Q6J("ngIf",o.valForm.controls.password.hasError("required")&&(o.valForm.controls.password.dirty||o.valForm.controls.password.touched)),e.xp6(10),e.Q6J("multiple",!1)("items",o.positionItems),e.xp6(1),e.Q6J("ngIf",o.valForm.controls.roleType.hasError("required")&&(o.valForm.controls.roleType.dirty||o.valForm.controls.roleType.touched)),e.xp6(11),e.Q6J("ngIf",null==o.selectedFile?null:o.selectedFile.name),e.xp6(1),e.Q6J("ngIf",!(null!=o.selectedFile&&o.selectedFile.name)),e.xp6(1),e.Q6J("ngIf",o.valForm.controls.file.hasError("required")&&(o.valForm.controls.file.dirty||o.valForm.controls.file.touched)),e.xp6(2),e.Q6J("src",o.fileUrl,e.LSH),e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(5),e.Q6J("ngIf",o.valForm.controls.deviceType.hasError("required")&&(o.valForm.controls.deviceType.dirty||o.valForm.controls.deviceType.touched)))},dependencies:[h.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.c5,l.sg,l.u,p.rH,U.ob,T.O2]}),n})();function R(n,i){1&n&&(e.TgZ(0,"div",35),e._uU(1,"This field is required"),e.qZA())}function P(n,i){1&n&&(e.TgZ(0,"div",35),e._uU(1,"This field is required"),e.qZA())}function $(n,i){1&n&&(e.TgZ(0,"div",35),e._uU(1,"Please enter a valid email"),e.qZA())}function j(n,i){1&n&&(e.TgZ(0,"div",35),e._uU(1,"This field is required"),e.qZA())}function K(n,i){1&n&&(e.TgZ(0,"div",35),e._uU(1,"store is required"),e.qZA())}function B(n,i){if(1&n&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.selectedFile?null:t.selectedFile.name," ")}}function O(n,i){if(1&n&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.fileName," ")}}function z(n,i){1&n&&e._UZ(0,"span",37)}function V(n,i){1&n&&(e.TgZ(0,"div",35),e._uU(1,"This field is required"),e.qZA())}function W(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"form",9,10),e.NdJ("ngSubmit",function(r){e.CHM(t);const s=e.MAs(1),a=e.oxw();return e.KtG(a.editUserData(r,s.value))})("keydown.enter",function(r){return r.preventDefault()})("keydown.shift.enter",function(r){return r.preventDefault()}),e.TgZ(2,"div",11)(3,"div",12)(4,"label"),e._uU(5,"User name"),e.qZA(),e.TgZ(6,"input",13),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.User.name=r)}),e.qZA(),e.YNc(7,R,2,0,"div",14),e.qZA()(),e.TgZ(8,"div",11)(9,"div",15)(10,"label"),e._uU(11,"Email"),e.qZA(),e.TgZ(12,"input",16),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.User.email=r)}),e.qZA(),e.YNc(13,P,2,0,"div",14),e.YNc(14,$,2,0,"div",14),e.qZA(),e.TgZ(15,"div",15)(16,"div",4)(17,"div",17)(18,"label"),e._uU(19,"Phone"),e.qZA(),e.TgZ(20,"input",18),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.User.phone_number=r)}),e.qZA(),e.YNc(21,j,2,0,"div",14),e.qZA(),e.TgZ(22,"div",19)(23,"label"),e._uU(24,"Is Admin?"),e.qZA(),e.TgZ(25,"ui-switch",20),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.User.is_admin=r)}),e.qZA()()()()(),e.TgZ(26,"div",11)(27,"div",21)(28,"div",22)(29,"label"),e._uU(30,"Role Type"),e.qZA(),e.TgZ(31,"ngx-select",23),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.User.role_type=r)}),e.qZA(),e.YNc(32,K,2,0,"div",14),e.qZA()()(),e.TgZ(33,"div",11)(34,"div",15)(35,"div",22)(36,"label"),e._uU(37,"image"),e.qZA(),e.TgZ(38,"label",24)(39,"button",25),e._uU(40," Select file "),e._UZ(41,"em",26),e.qZA(),e.TgZ(42,"input",27),e.NdJ("input",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onFileChanged(r))}),e.qZA(),e.YNc(43,B,2,1,"span",28),e.YNc(44,O,2,1,"span",28),e.qZA()(),e.TgZ(45,"div",29),e._UZ(46,"img",30),e.YNc(47,z,1,0,"span",31),e.qZA()(),e.TgZ(48,"div",15)(49,"label"),e._uU(50,"Device type"),e.qZA(),e.TgZ(51,"input",32),e.NdJ("ngModelChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.User.device_type=r)}),e.qZA(),e.YNc(52,V,2,0,"div",14),e.qZA()(),e.TgZ(53,"button",33),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(1);return e.KtG(r.resetForm({}))}),e._uU(54,"Clear"),e.qZA(),e.TgZ(55,"button",34),e._uU(56,"Save"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.valForm),e.xp6(6),e.Q6J("ngModel",t.User.name),e.xp6(1),e.Q6J("ngIf",t.valForm.controls.name.hasError("required")&&(t.valForm.controls.name.dirty||t.valForm.controls.name.touched)),e.xp6(5),e.Q6J("ngModel",t.User.email)("pattern",t.emailPattern),e.xp6(1),e.Q6J("ngIf",t.valForm.controls.email.hasError("required")&&(t.valForm.controls.email.dirty||t.valForm.controls.email.touched)),e.xp6(1),e.Q6J("ngIf",t.valForm.controls.email.hasError("pattern")&&(t.valForm.controls.email.dirty||t.valForm.controls.email.touched)),e.xp6(6),e.Q6J("ngModel",t.User.phone_number),e.xp6(1),e.Q6J("ngIf",t.valForm.controls.phone.hasError("required")&&(t.valForm.controls.phone.dirty||t.valForm.controls.phone.touched)),e.xp6(4),e.Q6J("ngModel",t.User.is_admin),e.xp6(6),e.Q6J("ngModel",t.User.role_type)("multiple",!1)("items",t.positionItems),e.xp6(1),e.Q6J("ngIf",t.valForm.controls.roleType.hasError("required")&&(t.valForm.controls.roleType.dirty||t.valForm.controls.roleType.touched)),e.xp6(11),e.Q6J("ngIf",null==t.selectedFile?null:t.selectedFile.name),e.xp6(1),e.Q6J("ngIf",!(null!=t.selectedFile&&t.selectedFile.name)),e.xp6(2),e.Q6J("src",t.fileUrl,e.LSH),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(4),e.Q6J("ngModel",t.User.device_type),e.xp6(1),e.Q6J("ngIf",t.valForm.controls.deviceType.hasError("required")&&(t.valForm.controls.deviceType.dirty||t.valForm.controls.deviceType.touched))}}let X=(()=>{class n{constructor(t,o,r,s,a){this.route=o,this.userService=r,this.validationService=s,this.fireStorage=a,this.loading=!1,this.positionItems=["Business Manager","Sales"],this.emailPattern=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,this.valForm=t.group({name:[null,l.kI.required],email:[null,l.kI.required],phone:[null,l.kI.required],isAdmin:[!1,l.kI.required],file:"",deviceType:[null,l.kI.required],roleType:[null,l.kI.required]})}ngOnInit(){this.id=this.route.snapshot.params.id,this.userService.getUserDetail(this.id).get().subscribe(t=>{t.exists?(this.User=t.data(),this.fileName=this.User.image,this.fileUrl=this.User.image):console.log("No such document!")},t=>{console.log("error",t)})}onFileChanged(t){if(t){if(this.selectedFile=t.target.files[0],this.fileUrl=this.selectedFile.src,0===this.selectedFile.length)return;const o=new FileReader;o.readAsDataURL(this.selectedFile),o.onload=r=>{this.fileUrl=o.result}}}editUserData(t,o){t.preventDefault();for(let r in this.valForm.controls)this.valForm.controls[r].markAsTouched();if(this.valForm.valid&&this.selectedFile){const r=this.selectedFile,s=Date.now(),a="/users",c=this.fireStorage.ref(`${a}/${s}-${r.name}`);this.fireStorage.upload(`${a}/${s}-${r.name}`,r).snapshotChanges().pipe((0,A.x)(()=>{c.getDownloadURL().subscribe(g=>{g&&(this.fileUrl=g,this.updateUserToDB(o,g))})})).subscribe(_=>{})}else this.valForm.valid?this.updateUserToDB(o,""):console.log("this.valForm",this.valForm)}updateUserToDB(t,o){let r={image:o,name:t.name,email:t.email,device_type:t.deviceType,role_type:t.roleType,phone_number:t.phone,is_admin:t.isAdmin,created_at:u.Z.firestore.FieldValue.serverTimestamp(),updated_at:u.Z.firestore.FieldValue.serverTimestamp()};this.userService.updateUser(this.id,r).then(()=>{this.validationService.sweetalertSuccess()}).catch(s=>{console.log(s)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.QS),e.Y36(p.gz),e.Y36(v.K),e.Y36(C.R),e.Y36(q.Q1))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-edit-user"]],decls:12,vars:2,consts:[[1,"content-heading"],[1,"d-flex","justify-content-between","w-100","align-items-center"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"routerLink"],["_ngcontent-lgi-c20","",1,"icon-arrow-left","mr-1"],[1,"row"],[1,"col-md-12"],[1,"card","card-default"],[1,"card-body"],["class","form-validate","role","form",3,"formGroup","ngSubmit","keydown.enter","keydown.shift.enter",4,"ngIf"],["role","form",1,"form-validate",3,"formGroup","ngSubmit","keydown.enter","keydown.shift.enter"],["dataPost","ngForm"],[1,"form-row"],[1,"col-lg-12","mb-3"],["required","","formControlName","name","name","name","type","text","placeholder","Enter First name",1,"form-control",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],[1,"col-lg-6","mb-3"],["required","","formControlName","email","name","email","type","email","placeholder","Enter email",1,"form-control",3,"ngModel","pattern","ngModelChange"],[1,"col-lg-9"],["required","","formControlName","phone","name","phone","type","text","placeholder","Enter phone",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-lg-3"],["formControlName","isAdmin",3,"ngModel","ngModelChange"],[1,"col-lg-6"],[1,"form-group"],["required","","formControlName","roleType","name","roleType","optionValueField","id","optionTextField","text","placeholder","Select position",1,"custom-single-select",3,"ngModel","multiple","items","ngModelChange"],["for","image-input",1,"file-upload"],[1,"btn","btn-secondary"],[1,"far","fa-folder-open","mr"],["ngModel","","formControlName","file","type","file","name","file","accept",".jpeg,.jpg,.png,.svg",1,"form-control",3,"input"],["class","form-control",4,"ngIf"],[1,"image-preview-box"],["onerror","this.onerror=null;this.src='assets/img/preview-img.png';",1,"previewImage",3,"src"],["class","spinner-border spinner-border-sm custom-spinner",4,"ngIf"],["required","","formControlName","deviceType","name","deviceType","type","text","placeholder","Enter device type",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-sm","btn-secondary","mr-2",3,"click"],["type","submit",1,"btn","btn-sm","btn-info"],[1,"text-danger"],[1,"form-control"],[1,"spinner-border","spinner-border-sm","custom-spinner"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span"),e._uU(3,"Edit user"),e.qZA(),e.TgZ(4,"button",2),e._UZ(5,"em",3),e._uU(6," Back "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),e.YNc(11,W,57,20,"form",8),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("routerLink","/users/user-listing"),e.xp6(7),e.Q6J("ngIf",o.User))},dependencies:[h.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.c5,l.sg,l.u,p.rH,U.ob,T.O2]}),n})();var f=d(1071);function ee(n,i){1&n&&e._UZ(0,"div",21)}function te(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e._UZ(2,"em",24),e.qZA(),e.TgZ(3,"button",25),e.NdJ("click",function(){const r=e.CHM(t),s=r.value,a=r.row,m=e.oxw();return e.KtG(m.deleteUserData(s,a))}),e._UZ(4,"em",26),e.qZA()()}if(2&n){const t=i.value;e.xp6(1),e.MGl("routerLink","/users/edit-user/",t,"")}}function ne(n,i){if(1&n&&e._UZ(0,"img",29),2&n){const t=e.oxw().value;e.s9C("src",t,e.LSH)}}function oe(n,i){1&n&&e._UZ(0,"img",30)}function re(n,i){if(1&n&&(e.YNc(0,ne,1,1,"img",27),e.YNc(1,oe,1,0,"img",28)),2&n){const t=i.value;e.Q6J("ngIf",t),e.xp6(1),e.Q6J("ngIf",!t)}}function ie(n,i){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=i.value;e.xp6(1),e.Oqu(t||"N/A")}}function se(n,i){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=i.value;e.xp6(1),e.Oqu(t||"N/A")}}function le(n,i){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=i.value;e.xp6(1),e.Oqu(t||"--")}}function ae(n,i){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=i.value;e.xp6(1),e.Oqu(t)}}d(6776);const Z=d(1373);let F=(()=>{class n{constructor(t){this.userService=t,this.Users=[],this.rowsFilter=[],this.arrayTableData=[],this.arrayRowData="",this.isLoading=!1}ngOnInit(){this.uid=sessionStorage.getItem("uid"),this.loginType=sessionStorage.getItem("loginType"),this.getUserListingData()}getUserListingData(){this.userService.getUserList().subscribe(t=>{if(this.isLoading=!0,this.Users=[],this.rowsFilter=[],this.arrayTableData=[],t.length){this.Users=t.map(o=>{let r=o.payload.doc.data();return r.phone_number=r.phone_number&&r.country_code?`(${r.country_code}) ${r.phone_number}`:"--",{id:o.payload.doc.id,data:r}}),this.arrayTableData=[];for(let o=0;o<this.Users.length;o++)this.arrayRowData=this.Users[o].data,this.arrayRowData.sr_no=o+1,this.arrayRowData.id=this.Users[o].id,this.arrayTableData.push(this.arrayRowData),this.isLoading=!1;this.rowsFilter=this.arrayTableData}else this.isLoading=!1})}updateFilter(t){const o=t.target.value.toLowerCase(),r=this.arrayTableData.filter(function(s){if(""!=s.name&&null!=s.name)return-1!==s.name.toLowerCase().indexOf(o)||!o});this.rowsFilter=r,this.table.offset=0}ngAfterViewInit(){}deleteUserData(t,o){const r={deleted_at:u.Z.firestore.FieldValue.serverTimestamp(),deleted_by:this.uid,disabled:!1,deleted_by_user_type:this.loginType};this.sweetalertWarning(o.uid,t,r,"singleUserData")}sweetalertWarning(t,o,r,s){Z({title:"Are you sure?",text:"Want to delete data!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:"",closeModal:!0},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger",closeModal:!1}}}).then(a=>{if(a)if("singleUserData"==s)u.Z.functions().httpsCallable("disableUser")(t).then(c=>{c&&this.userService.softDeleteSingleUser(o,r).then(()=>{Z("Deleted!","Data deleted!","success"),this.getUserListingData()})});else if("multipleUserData"==s){const m=u.Z.functions().httpsCallable("disableMultipleUser");r.forEach(c=>{m(c.uid).then(b=>{b&&this.userService.softDeleteMultipleUser(c).then(()=>{Z("Deleted!","Data deleted!","success"),this.getUserListingData()})})})}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-users"]],viewQuery:function(t,o){if(1&t&&e.Gf(f.nE,7),2&t){let r;e.iGM(r=e.CRH())&&(o.table=r.first)}},decls:29,vars:10,consts:[[1,"content-heading"],[1,"d-flex","justify-content-between","w-100","align-items-center"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"routerLink"],["_ngcontent-lgi-c20","",1,"icon-plus","mr-1"],[1,"card","card-default","b"],["class","spinner-border loading","role","status",4,"ngIf"],[1,"card-body"],[1,"row","mb-4"],[1,"col-lg-4"],["type","text","placeholder","Type to filter the name column...",1,"form-control",3,"keyup"],[1,"bootstrap","no-detail-row",3,"scrollbarH","columnMode","footerHeight","rowHeight","limit","rows"],["table",""],["name","Sr. no.","prop","sr_no",3,"width"],["name","Actions","sortable","false","prop","id"],["ngx-datatable-cell-template",""],["name","Unique Id","prop","id",3,"width"],["name","Image","sortable","false","prop","userImage"],["name","Name","prop","name"],["name","Email","prop","email"],["name","Role","prop","role_type"],["name","Phone","prop","phone_number"],["role","status",1,"spinner-border","loading"],[1,"d-flex","align-items-center"],["type","button",1,"mr-1","btn","btn-success","comn-action-btn","mb-1",3,"routerLink"],["_ngcontent-lgi-c20","",1,"fas","fa-edit"],["type","button",1,"mr-1","btn","btn-danger","comn-action-btn","mb-1",3,"click"],["_ngcontent-lgi-c20","",1,"fas","fa-trash-alt"],["class","listImage",3,"src",4,"ngIf"],["src","assets/img/profile.jpg","class","listImage",4,"ngIf"],[1,"listImage",3,"src"],["src","assets/img/profile.jpg",1,"listImage"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span"),e._uU(3,"Users"),e.qZA(),e.TgZ(4,"button",2),e._UZ(5,"em",3),e._uU(6," Add New "),e.qZA()()(),e.TgZ(7,"div",4),e.YNc(8,ee,1,0,"div",5),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"input",9),e.NdJ("keyup",function(s){return o.updateFilter(s)}),e.qZA()()(),e.TgZ(13,"ngx-datatable",10,11),e._UZ(15,"ngx-datatable-column",12),e.TgZ(16,"ngx-datatable-column",13),e.YNc(17,te,5,1,"ng-template",14),e.qZA(),e._UZ(18,"ngx-datatable-column",15),e.TgZ(19,"ngx-datatable-column",16),e.YNc(20,re,2,2,"ng-template",14),e.qZA(),e.TgZ(21,"ngx-datatable-column",17),e.YNc(22,ie,2,1,"ng-template",14),e.qZA(),e.TgZ(23,"ngx-datatable-column",18),e.YNc(24,se,2,1,"ng-template",14),e.qZA(),e.TgZ(25,"ngx-datatable-column",19),e.YNc(26,le,2,1,"ng-template",14),e.qZA(),e.TgZ(27,"ngx-datatable-column",20),e.YNc(28,ae,2,1,"ng-template",14),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("routerLink","/users/add-user"),e.xp6(4),e.Q6J("ngIf",o.isLoading),e.xp6(5),e.Q6J("scrollbarH",!0)("columnMode","force")("footerHeight",50)("rowHeight","auto")("limit",10)("rows",o.rowsFilter),e.xp6(2),e.Q6J("width",50),e.xp6(3),e.Q6J("width",180))},dependencies:[f.nE,f.UC,f.vq,h.O5,p.rH],encapsulation:2}),n})();const de=[{path:"",component:F},{path:"add-user",component:G},{path:"edit-user/:id",component:X},{path:"user-listing",component:F}];let me=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.xD,h.ez,x.m,U.Su,T.i4,p.Bz.forChild(de),p.Bz]}),n})()}}]);