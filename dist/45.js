"use strict";(self.webpackChunkng2angle=self.webpackChunkng2angle||[]).push([[45],{4045:(w,f,r)=>{r.r(f),r.d(f,{OccasionsModule:()=>Y});var p=r(6895),d=r(6691),g=r(5229),m=r(1071),c=r(4719),u=r(5867),e=(r(2504),r(4650)),v=r(362),T=r(8064);let _=(()=>{class n{constructor(t){this.afs=t}getOccasionsList(){return this.afs.collection("occasions").snapshotChanges()}getOccasionsDetail(t){return this.afs.collection("occasions").doc(t)}addOccasions(t){return new Promise((o,i)=>{this.afs.collection("occasions").add(t).then(s=>{o(s)}).catch(s=>{i(s)})})}deleteOccasions(t){return new Promise((o,i)=>{this.afs.collection("occasions").doc(t).delete().then(s=>{o(s)}).catch(s=>{i(s)})})}updateOccasions(t,o){return new Promise((i,s)=>{this.afs.collection("occasions").doc(t).update(o).then(l=>{i(l)}).catch(l=>{s(l)})})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.ST))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=r(2734);function x(n,a){1&n&&(e.TgZ(0,"div",30),e._uU(1," Title is required"),e.qZA())}function C(n,a){if(1&n&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.selectedFile?null:t.selectedFile.name," ")}}function y(n,a){if(1&n&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.fileName," ")}}function O(n,a){1&n&&e._UZ(0,"span",32)}function F(n,a){1&n&&e._UZ(0,"span",33)}function A(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"form",9,10),e.NdJ("ngSubmit",function(i){e.CHM(t);const s=e.MAs(1),l=e.oxw();return e.KtG(l.editOccasions(i,s.value))})("keydown.enter",function(i){return i.preventDefault()})("keydown.shift.enter",function(i){return i.preventDefault()}),e.TgZ(2,"div",11)(3,"div",12)(4,"div",11)(5,"div",13)(6,"label"),e._uU(7,"Title"),e.qZA(),e.TgZ(8,"input",14),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.occasionDetailData.title=i)}),e.qZA(),e.YNc(9,x,2,0,"div",15),e.qZA(),e.TgZ(10,"div",16)(11,"label"),e._uU(12,"Active"),e.qZA(),e.TgZ(13,"ui-switch",17),e.NdJ("ngModelChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.occasionDetailData.is_enabled=i)}),e.qZA()()()(),e.TgZ(14,"div",18)(15,"div",19)(16,"label"),e._uU(17,"Choose Gif"),e.qZA(),e.TgZ(18,"label",20)(19,"button",21),e._uU(20," Select Gif "),e._UZ(21,"em",22),e.qZA(),e.TgZ(22,"input",23),e.NdJ("input",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onFileChanged(i))}),e.qZA(),e.YNc(23,C,2,1,"span",24),e.YNc(24,y,2,1,"span",24),e.qZA(),e.TgZ(25,"div",25),e._UZ(26,"img",26),e.YNc(27,O,1,0,"span",27),e.qZA()()()(),e.TgZ(28,"button",28),e._uU(29,"Save"),e.YNc(30,F,1,0,"span",29),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.valForm),e.xp6(8),e.Q6J("ngModel",t.occasionDetailData.title),e.xp6(1),e.Q6J("ngIf",t.valForm.controls.title.hasError("required")&&(t.valForm.controls.title.dirty||t.valForm.controls.title.touched)),e.xp6(4),e.Q6J("ngModel",t.occasionDetailData.is_enabled),e.xp6(10),e.Q6J("ngIf",null==t.selectedFile?null:t.selectedFile.name),e.xp6(1),e.Q6J("ngIf",!(null!=t.selectedFile&&t.selectedFile.name)),e.xp6(2),e.Q6J("src",t.fileUrl,e.LSH),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(3),e.Q6J("ngIf",t.saveLoading)}}let U=(()=>{class n{constructor(t,o,i,s,l){this.validationService=o,this.occasionsService=i,this.router=s,this.route=l,this.loading=!1,this.saveLoading=!1,this.occasionDetailData=[],this.valForm=t.group({title:["",c.kI.required],gif:"",isEnabled:[!0,c.kI.required]})}ngOnInit(){this.id=this.route.snapshot.params.id,this.occasionsService.getOccasionsDetail(this.id).get().subscribe(t=>{t.exists&&(this.occasionDetailData=t.data(),this.occasionDetailData.gif&&(this.fileName=this.occasionDetailData.gif,this.fileUrl=this.occasionDetailData.gif))})}onFileChanged(t){if(t){if(this.selectedFile=t.target.files[0],this.fileUrl=this.selectedFile.src,0===this.selectedFile.length)return;const o=new FileReader;o.readAsDataURL(this.selectedFile),o.onload=i=>{this.fileUrl=o.result}}}editOccasions(t,o){t.preventDefault();for(let i in this.valForm.controls)this.valForm.controls[i].markAsTouched();if(this.valForm.valid){let i={title:o.title,gif:this.fileUrl||"",is_enabled:o.isEnabled,created_at:u.Z.firestore.FieldValue.serverTimestamp(),updated_at:u.Z.firestore.FieldValue.serverTimestamp()};this.occasionsService.updateOccasions(this.id,i).then(()=>{this.saveLoading=!1,this.validationService.sweetalertSuccess(),this.router.navigate(["/occasions"])}).catch(s=>{this.saveLoading=!1})}else console.log("this.valForm",this.valForm)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.QS),e.Y36(v.R),e.Y36(_),e.Y36(d.F0),e.Y36(d.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-occasion-edit"]],decls:12,vars:2,consts:[[1,"content-heading"],[1,"d-flex","justify-content-between","w-100","align-items-center"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"routerLink"],["_ngcontent-lgi-c20","",1,"icon-arrow-left","mr-1"],[1,"row"],[1,"col-md-12"],[1,"card","card-default"],[1,"card-body"],["class","form-validate","role","form",3,"formGroup","ngSubmit","keydown.enter","keydown.shift.enter",4,"ngIf"],["role","form",1,"form-validate",3,"formGroup","ngSubmit","keydown.enter","keydown.shift.enter"],["dataPost","ngForm"],[1,"form-row"],[1,"col-lg-6"],[1,"col-12","col-md-10"],["required","","formControlName","title","type","text","placeholder","Enter title",1,"form-control","with-focus",3,"ngModel","ngModelChange"],["class","text-danger",4,"ngIf"],[1,"col-12","col-md-2"],["formControlName","isEnabled",3,"ngModel","ngModelChange"],[1,"col-12","col-md-6"],[1,"mb-3"],["for","gif-input",1,"file-upload"],[1,"btn","btn-secondary"],[1,"far","fa-folder-open","mr"],["ngModel","","placeholder","Choose gif","type","file","formControlName","gif","name","gif","accept",".gif",1,"form-control",3,"input"],["class","form-control",4,"ngIf"],[1,"image-preview-box"],["onerror","this.onerror=null;this.src='assets/img/preview-img.png';",1,"previewImage",3,"src"],["class","spinner-border spinner-border-sm custom-spinner",4,"ngIf"],["type","submit",1,"btn","btn-sm","btn-info","mt-2"],["class","spinner-border spinner-border-sm ml-2",4,"ngIf"],[1,"text-danger"],[1,"form-control"],[1,"spinner-border","spinner-border-sm","custom-spinner"],[1,"spinner-border","spinner-border-sm","ml-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span"),e._uU(3,"Edit occasions"),e.qZA(),e.TgZ(4,"button",2),e._UZ(5,"em",3),e._uU(6," Back "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),e.YNc(11,A,31,9,"form",8),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("routerLink","/occasions/list"),e.xp6(7),e.Q6J("ngIf",o.occasionDetailData))},dependencies:[p.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,h.ob,c.sg,c.u,d.rH]}),n})();function D(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().value,s=e.oxw();return e.KtG(s.deleteOccasionsData(i))}),e._UZ(1,"em",23),e.qZA()}}function S(n,a){if(1&n&&(e.TgZ(0,"div",18)(1,"button",19),e._UZ(2,"em",20),e.qZA(),e.YNc(3,D,2,0,"button",21),e.qZA()),2&n){const t=a.value;e.xp6(1),e.MGl("routerLink","/occasions/edit/",t,""),e.xp6(2),e.Q6J("ngIf","defaultOccasion"!=t)}}function I(n,a){if(1&n&&e._UZ(0,"img",26),2&n){const t=e.oxw().value;e.s9C("src",t,e.LSH)}}function L(n,a){1&n&&e._UZ(0,"img",27)}function J(n,a){if(1&n&&(e.YNc(0,I,1,1,"img",24),e.YNc(1,L,1,0,"img",25)),2&n){const t=a.value;e.Q6J("ngIf",t),e.xp6(1),e.Q6J("ngIf",!t)}}const b=r(1373);let Z=(()=>{class n{constructor(t){this.occasionsService=t,this.HomeSections=[],this.arrayRowData="",this.rowsFilter=[],this.arrayTableData=[]}ngOnInit(){this.occasionsService.getOccasionsList().subscribe(t=>{this.HomeSections=[],this.HomeSections=t.map(o=>{let i=o.payload.doc.data();return{id:o.payload.doc.id,data:i}}),this.arrayTableData=[];for(let o=0;o<this.HomeSections.length;o++)this.arrayRowData=this.HomeSections[o].data,this.arrayRowData.sr_no=o+1,this.arrayRowData.id=this.HomeSections[o].id,this.arrayTableData.push(this.arrayRowData);this.rowsFilter=this.arrayTableData})}updateFilter(t){const o=t.target.value.toLowerCase(),i=this.arrayTableData.filter(function(s){if(""!=s.title&&null!=s.title)return-1!==s.title.toLowerCase().indexOf(o)||!o});this.rowsFilter=i,this.table.offset=0}deleteOccasionsData(t){this.sweetalertWarning(t)}sweetalertWarning(t){b({title:"Are you sure?",text:"Want to delete data!",icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:"",closeModal:!0},confirm:{text:"Yes, delete it!",value:!0,visible:!0,className:"bg-danger",closeModal:!1}}}).then(o=>{o&&this.occasionsService.deleteOccasions(t).then(()=>{b("Deleted!","Data deletd!","success")})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-occasion-list"]],viewQuery:function(t,o){if(1&t&&e.Gf(m.nE,7),2&t){let i;e.iGM(i=e.CRH())&&(o.table=i.first)}},decls:22,vars:9,consts:[[1,"content-heading"],[1,"d-flex","justify-content-between","w-100","align-items-center"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"routerLink"],["_ngcontent-lgi-c20","",1,"icon-plus","mr-1"],[1,"card","card-default"],[1,"card-body"],[1,"row","mb-3"],[1,"col-lg-3"],["type","text","placeholder","Type to filter the name column...",1,"form-control",3,"keyup"],[1,"bootstrap","no-detail-row",3,"scrollbarH","columnMode","footerHeight","rowHeight","limit","rows"],["table",""],["name","Sr. No.","prop","sr_no",3,"width"],["name","Actions","sortable","false","prop","id","justify-items-center",""],["ngx-datatable-cell-template",""],["name","Unique Id","prop","id",3,"width"],["name","Gif","prop","gif"],["name","Title","prop","title"],["name","Active","prop","is_enabled"],[1,"d-flex"],["type","button",1,"mr-1","btn","btn-success","comn-action-btn","mb-1",3,"routerLink"],["_ngcontent-lgi-c20","",1,"fas","fa-edit"],["class","mr-1 btn btn-danger comn-action-btn mb-1","type","button",3,"click",4,"ngIf"],["type","button",1,"mr-1","btn","btn-danger","comn-action-btn","mb-1",3,"click"],["_ngcontent-lgi-c20","",1,"fas","fa-trash-alt"],["class","listImage",3,"src",4,"ngIf"],["src","assets/img/preview-img.png","class","listImage align-items-center",4,"ngIf"],[1,"listImage",3,"src"],["src","assets/img/preview-img.png",1,"listImage","align-items-center"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span"),e._uU(3,"Occasions"),e.qZA(),e.TgZ(4,"button",2),e._UZ(5,"em",3),e._uU(6," Add New "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"input",8),e.NdJ("keyup",function(s){return o.updateFilter(s)}),e.qZA()()(),e.TgZ(12,"ngx-datatable",9,10),e._UZ(14,"ngx-datatable-column",11),e.TgZ(15,"ngx-datatable-column",12),e.YNc(16,S,4,2,"ng-template",13),e.qZA(),e._UZ(17,"ngx-datatable-column",14),e.TgZ(18,"ngx-datatable-column",15),e.YNc(19,J,2,2,"ng-template",13),e.qZA(),e._UZ(20,"ngx-datatable-column",16)(21,"ngx-datatable-column",17),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("routerLink","/occasions/add"),e.xp6(8),e.Q6J("scrollbarH",!0)("columnMode","force")("footerHeight",50)("rowHeight","auto")("limit",10)("rows",o.rowsFilter),e.xp6(2),e.Q6J("width",50),e.xp6(3),e.Q6J("width",180))},dependencies:[p.O5,d.rH,m.nE,m.UC,m.vq]}),n})();function q(n,a){1&n&&(e.TgZ(0,"div",29),e._uU(1," Title is required"),e.qZA())}function E(n,a){if(1&n&&(e.TgZ(0,"span",30),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.selectedFile?null:t.selectedFile.name," ")}}function N(n,a){1&n&&e._UZ(0,"span",31)}function M(n,a){1&n&&e._UZ(0,"span",32)}const Q=[{path:"",component:Z},{path:"list",component:Z},{path:"add",component:(()=>{class n{constructor(t,o,i,s){this.validationService=o,this.occasionsService=i,this.router=s,this.loading=!1,this.saveLoading=!1,this.valForm=t.group({title:["",c.kI.required],gif:"",isEnabled:[!0,c.kI.required]})}ngOnInit(){}onFileChanged(t){if(t){if(this.selectedFile=t.target.files[0],this.fileUrl=this.selectedFile.src,0===this.selectedFile.length)return;const o=new FileReader;o.readAsDataURL(this.selectedFile),o.onload=i=>{this.fileUrl=o.result}}}addOccasions(t,o){t.preventDefault();for(let i in this.valForm.controls)this.valForm.controls[i].markAsTouched();if(this.valForm.valid){let i={title:o.title,gif:this.fileUrl||"",is_enabled:o.isEnabled,created_at:u.Z.firestore.FieldValue.serverTimestamp(),updated_at:u.Z.firestore.FieldValue.serverTimestamp()};this.occasionsService.addOccasions(i).then(()=>{this.saveLoading=!1,this.validationService.sweetalertSuccess(),this.router.navigate(["/occasions"])}).catch(s=>{console.log(s),this.saveLoading=!1})}else console.log("this.valForm",this.valForm)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.QS),e.Y36(v.R),e.Y36(_),e.Y36(d.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-occasion-add"]],decls:41,vars:7,consts:[[1,"content-heading"],[1,"d-flex","justify-content-between","w-100","align-items-center"],["type","button",1,"btn","btn-primary","d-flex","align-items-center",3,"routerLink"],["_ngcontent-lgi-c20","",1,"icon-arrow-left","mr-1"],[1,"row"],[1,"col-md-12"],[1,"card","card-default"],[1,"card-body"],["role","form",1,"form-validate",3,"formGroup","ngSubmit","keydown.enter","keydown.shift.enter"],["dataPost","ngForm"],[1,"form-row"],[1,"col-lg-6"],[1,"col-12","col-md-10"],["ngModel","","required","","formControlName","title","type","text","placeholder","Enter title",1,"form-control","with-focus"],["class","text-danger",4,"ngIf"],[1,"col-12","col-md-2"],["formControlName","isEnabled"],[1,"col-12","col-md-6"],[1,"mb-3"],["for","gif-input",1,"file-upload"],[1,"btn","btn-secondary"],[1,"far","fa-folder-open","mr"],["ngModel","","placeholder","Choose gif","type","file","formControlName","gif","name","gif","accept",".gif",1,"form-control",3,"input"],["class","form-control",4,"ngIf"],[1,"image-preview-box"],["onerror","this.onerror=null;this.src='assets/img/preview-img.png';",1,"previewImage",3,"src"],["class","spinner-border spinner-border-sm custom-spinner",4,"ngIf"],["type","submit",1,"btn","btn-sm","btn-info","mt-2"],["class","spinner-border spinner-border-sm ml-2",4,"ngIf"],[1,"text-danger"],[1,"form-control"],[1,"spinner-border","spinner-border-sm","custom-spinner"],[1,"spinner-border","spinner-border-sm","ml-2"]],template:function(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"span"),e._uU(3,"Add occasions"),e.qZA(),e.TgZ(4,"button",2),e._UZ(5,"em",3),e._uU(6," Back "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"form",8,9),e.NdJ("ngSubmit",function(l){e.CHM(i);const k=e.MAs(12);return e.KtG(o.addOccasions(l,k.value))})("keydown.enter",function(l){return l.preventDefault()})("keydown.shift.enter",function(l){return l.preventDefault()}),e.TgZ(13,"div",10)(14,"div",11)(15,"div",10)(16,"div",12)(17,"label"),e._uU(18,"Title"),e.qZA(),e._UZ(19,"input",13),e.YNc(20,q,2,0,"div",14),e.qZA(),e.TgZ(21,"div",15)(22,"label"),e._uU(23,"Active"),e.qZA(),e._UZ(24,"ui-switch",16),e.qZA()()(),e.TgZ(25,"div",17)(26,"div",18)(27,"label"),e._uU(28,"Choose Gif"),e.qZA(),e.TgZ(29,"label",19)(30,"button",20),e._uU(31," Select Gif "),e._UZ(32,"em",21),e.qZA(),e.TgZ(33,"input",22),e.NdJ("input",function(l){return o.onFileChanged(l)}),e.qZA(),e.YNc(34,E,2,1,"span",23),e.qZA(),e.TgZ(35,"div",24),e._UZ(36,"img",25),e.YNc(37,N,1,0,"span",26),e.qZA()()()(),e.TgZ(38,"button",27),e._uU(39,"Save"),e.YNc(40,M,1,0,"span",28),e.qZA()()()()()()}2&t&&(e.xp6(4),e.Q6J("routerLink","/occasions/list"),e.xp6(7),e.Q6J("formGroup",o.valForm),e.xp6(9),e.Q6J("ngIf",o.valForm.controls.title.hasError("required")&&(o.valForm.controls.title.dirty||o.valForm.controls.title.touched)),e.xp6(14),e.Q6J("ngIf",null==o.selectedFile?null:o.selectedFile.name),e.xp6(2),e.Q6J("src",o.fileUrl,e.LSH),e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(3),e.Q6J("ngIf",o.saveLoading))},dependencies:[p.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,h.ob,c.sg,c.u,d.rH]}),n})()},{path:"edit/:id",component:U}];let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,h.Su,g.m,m.xD,d.Bz.forChild(Q),d.Bz]}),n})()},362:(w,f,r)=>{r.d(f,{R:()=>g});var p=r(4650);const d=r(1373);let g=(()=>{class m{constructor(){}sweetalertError(u){d(u,"","error")}sweetalertSuccess(){d("Data saved successfully!","","success")}sweetalertUpdateSuccess(){d("Data updated successfully!","","success")}sweetalertFileUploadSuccess(){d("file uploaded successfully!","","success")}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275prov=p.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);