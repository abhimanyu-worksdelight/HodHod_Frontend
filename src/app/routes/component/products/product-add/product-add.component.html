<!-- START card-->
<div class="content-heading">
    <div class="d-flex justify-content-between w-100 align-items-center">
        <span>Add Product</span>
        <button class="btn btn-primary d-flex align-items-center" [routerLink]="'/products'" type="button">
            <em _ngcontent-lgi-c20="" class="icon-arrow-left mr-1"></em> Back
        </button>
    </div>
</div>
<!-- START row-->

<div class="row">
    <div class="col-md-12">
        <!-- START card-->
        <div class="spinner-border loading" role="status" *ngIf="loading"></div>
        <div class="card card-default">
            <div class="card-body">
                <form [formGroup]="valForm" class="form-validate" role="form" #dataPost="ngForm"
                    (ngSubmit)="addProduct($event, dataPost.value)" (keydown.enter)="$event.preventDefault()"
                    (keydown.shift.enter)="$event.preventDefault()">
                    <div class="form-row">
                        <div class="col-12 col-md-6">
                            <div class="mb-3">
                                <label>Product Title (ENGLISH)</label>
                                <input autocomplete="off" class="form-control with-focus" required
                                    formControlName="name" ngModel name="name" type="text"
                                    placeholder="Enter Product Title" />
                                <div class="text-danger"
                                    *ngIf="valForm.controls['name'].hasError('required') && (valForm.controls['name'].dirty || valForm.controls['name'].touched)">
                                    Title is required</div>
                            </div>
                            <div class="mb-3">
                                <label>Product Title (ARABIC)</label>
                                <input autocomplete="off" class="form-control with-focus" formControlName="name_arabic"
                                    ngModel name="name_arabic" type="text" placeholder="Enter Product Title" />
                            </div>
                            <div class="mb-3">
                                <label>Price</label>
                                <!-- <input autocomplete="off" type="number" step="any" min="1"  onpaste="return false" #price id="price" 
                                    class="form-control with-focus" required formControlName="price" [(ngModel)]="productDetailData.price" name="price"
                                     placeholder="Enter price" /> -->
                                <input autocomplete="off" type="number" step="any" min="1" onpaste="return false" #price
                                    id="price" class="form-control with-focus" required formControlName="price" ngModel
                                    name="price" placeholder="Enter price" [pattern]="pricePattern" />
                                <div class="text-danger"
                                    *ngIf="valForm.controls['price'].hasError('required') && (valForm.controls['price'].dirty || valForm.controls['price'].touched)">
                                    Price is required</div>
                                <div class="text-danger" *ngIf="valForm.controls['price'].hasError('pattern')">
                                    Enter valid price</div>
                            </div>
                            <div class="mb-3">
                                <label>Description (ENGLISH)</label>
                                <textarea autocomplete="off" class="form-control" formControlName="description"
                                    name="description" type="text" placeholder="Enter description"></textarea>
                            </div>
                            <div class="mb-3">
                                <label>Description (ARABIC)</label>
                                <textarea autocomplete="off" class="form-control" formControlName="description_arabic"
                                    name="description_arabic" type="text" placeholder="Enter description"></textarea>
                            </div>
                            <div class="mb-3">
                                <label>Category</label>
                                <select class="custom-select" required formControlName="cat_id" ngModel name="category"
                                    (change)="onChangeCategory($event.target.value)">
                                    <option value="">Select Category</option>
                                    <option value="{{ category.id }}" *ngFor="let category of Categories">{{
                                        category.name
                                        }}</option>
                                </select>
                                <div class="text-danger"
                                    *ngIf="valForm.controls['cat_id'].hasError('required') && (valForm.controls['cat_id'].dirty || valForm.controls['cat_id'].touched)">
                                    Category is required</div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6">
                            <div class="form-row">

                                <div class="col-12 col-md-12">
                                    <label>Vendor</label>
                                    <ngx-select class="custom-single-select" required ngModel
                                        formControlName="vendor_id" name="vendor_id" optionValueField="id"
                                        optionTextField="text" (data)="value" [multiple]="false" [items]="vendorItems"
                                        [disabled]="disabled" placeholder="Select vendors">
                                    </ngx-select>
                                    <div class="text-danger"
                                        *ngIf="valForm.controls['vendor_id'].hasError('required') && (valForm.controls['vendor_id'].dirty || valForm.controls['vendor_id'].touched)">
                                        Vendor is required</div>
                                </div>
                                <div class="col-12 col-md-12">

                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-3">
                                        <label>Tags</label>
                                        <ngx-select required ngModel formControlName="tag_id" name="tag_id"
                                            optionValueField="id" optionTextField="text" (data)="value"
                                            [multiple]="true" [items]="tagItems" [disabled]="disabled"
                                            placeholder="Select tags"></ngx-select>
                                        <div class="text-danger"
                                            *ngIf="valForm.controls['tag_id'].hasError('required') && (valForm.controls['tag_id'].dirty || valForm.controls['tag_id'].touched)">
                                            Tag is required</div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <!-- <div class="mb-3">
                                        <label>inSections</label>
                                        <select class="custom-select" required formControlName="inSection_id" ngModel name="inSection"
                                            (change)="onChangeInSection($event.target.value)">
                                            <option value="">select Insections</option>
                                            <option value="{{ inSection.id }}" *ngFor="let inSection of InSections">{{ inSection.name
                                                }}</option>
                                        </select>
                                        <div class="text-danger"
                                            *ngIf="valForm.controls['cat_id'].hasError('required') && (valForm.controls['inSection_id'].dirty || valForm.controls['inSection_id'].touched)">
                                            inSection is required</div>
                                    </div> -->
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-3" *ngIf="loginType != 'u7GeGmO2luLmkOMKeZ0k'">
                                        <label>InSections</label>
                                        <ngx-select ngModel required formControlName="inSection_id" name="inSection"
                                            optionValueField="id" optionTextField="text" (data)="value"
                                            class="custom-single-select" [multiple]="false" [items]="inSectionItems"
                                            [disabled]="disabled" placeholder="Select inSection">
                                        </ngx-select>
                                        <div class="text-danger"
                                            *ngIf="valForm.controls['inSection_id'].hasError('required') && (valForm.controls['inSection_id'].dirty || valForm.controls['inSection_id'].touched)">
                                            Section is required</div>
                                    </div>
                                </div>
                                <div class="col-12">
                                    <div class="row mb-3">
                                        <div class="col-12 col-md-3">
                                            <label>Active</label>
                                            <ui-switch formControlName="isEnabled"></ui-switch>
                                        </div>
                                        <div class="col-12 col-md-3">
                                            <label>isQuantity</label>
                                            <ui-switch formControlName="isQuantity" id="isQuantity"
                                                (change)="onIsQuantityChanged($event)"></ui-switch>
                                        </div>
                                        <div class="col-12 col-md-6" *ngIf="isQuantity">
                                            <label>Maximum Quantity</label>
                                            <input autocomplete="off" type="number" step="any" min="1"
                                                onpaste="return false" #max_quantity id="max_quantity"
                                                class="form-control with-focus" formControlName="max_quantity"
                                                [ngModel]="maxQuantity" name="max_quantity"
                                                placeholder="Enter max quantity" [pattern]="pricePattern" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-12">
                                    <div class="mb-3">
                                        <label>Choose Image</label>
                                        <label for="image-input" class="file-upload">
                                            <button class="btn btn-secondary">
                                                Select Image <em class="far fa-folder-open mr"></em></button>
                                            <input ngModel placeholder="Choose image" type="file"
                                                formControlName="image" name="image" class="form-control"
                                                (input)="onFileChanged($event, 'images')" accept=".jpeg,.jpg,.png,.svg">
                                            <span class="form-control" *ngIf="selectedFile?.name"> {{ selectedFile?.name
                                                }} </span>
                                        </label>
                                        <div class="image-preview-box">
                                            <img class="previewImage" [src]="fileUrl"
                                                onerror="this.onerror=null;this.src='assets/img/preview-img.png';" />
                                            <!-- Progress Bar -->
                                            <span *ngIf="loading"
                                                class="spinner-border spinner-border-sm custom-spinner"></span>
                                        </div>
                                    </div>
                                </div>

                                <!-- <div class="col-12 col-md-12">
                                    <div class="mb-3">
                                        <label>Choose Preview Image</label>
                                        <label for="image-input" class="file-upload">
                                            <button class="btn btn-secondary">
                                                Select Image <em class="far fa-folder-open mr"></em></button>
                                            <input ngModel placeholder="Choose image" type="file"
                                                formControlName="thumbnail" name="thumbnail" class="form-control"
                                                (input)="onFileChanged($event, 'thumbnail')"
                                                accept=".jpeg,.jpg,.png,.svg">
                                            <span class="form-control" *ngIf="selectedThumnailFile?.name"> {{
                                                selectedThumnailFile?.name }} </span>
                                        </label>
                                        <div class="image-preview-box">
                                            <img class="previewImage" [src]="fileThumbnailUrl"
                                                onerror="this.onerror=null;this.src='assets/img/preview-img.png';" />
                                            <span *ngIf="loading"
                                                class="spinner-border spinner-border-sm custom-spinner"></span>
                                        </div>
                                    </div>
                                </div> -->
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-sm btn-secondary mr-2" (click)="dataPost.resetForm({})"
                        type="button">Clear</button>
                    <button class="btn btn-sm btn-info" type="submit">Save <span *ngIf="saveLoading"
                            class="spinner-border spinner-border-sm ml-2"></span></button>
                </form>
            </div>
        </div>
        <!-- END card-->
    </div>
</div>
<!-- END row-->